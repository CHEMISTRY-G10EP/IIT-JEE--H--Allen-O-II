<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Added for mobile responsiveness -->

  <title> Quiz – _______________________________</title>
  
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #2b3359;
      color: #f0f0f0;
    }
    #logo {
      display: block;
      margin: 0 auto 25px;
      max-width: 180px;
      width: 80%;
      height: auto;
    }
    #name-container {
      background: #010d2b;
      padding: 30px;
      border-radius: 6px;
      max-width: 420px;
      width: 90%;
      margin: 0 auto;
    }
    #name-container input {
      width: 100%;
      padding: 10px;
      margin: 10px 0 15px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
    }
    #quiz-container { display: none; }
    .question {
      border: 1px solid #d4b935;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 5px;
      background: #010d2b;
    }
    .question h3 { margin: 0 0 10px; }
    .option-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 6px 0;
      padding: 6px 8px;
      border-radius: 4px;
      background: #0a2463;
      color: #ccc;
      cursor: pointer;
    }
    .option-item input { margin: 0; }
    .submit-button, .toggle-button, .dontknow-button {
      margin-top: 10px;
      padding: 6px 12px;
      background: #007BFF;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 5px;
    }
    .solution {
      display: none;
      margin-top: 10px;
      background: #0a2463;
      padding: 10px;
      border-left: 4px solid #28a745;
    }
    /* New PPT button style */
    .ppt-button {
      margin-top: 8px;
      padding: 6px 12px;
      background: #6f42c1;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: none; /* hidden by default */
    }
    #scorecard {
      background: #2d2d2d;
      padding: 15px;
      border-radius: 6px;
      margin-top: 30px;
      display: none;
    }
    #timer { font-weight: bold; color: #00ffcc; }
    #studentPrintName {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: -15px;
      margin-bottom: 5px;
      display: none;
    }
    #examDateTime {
      text-align: center;
      font-size: 14px;
      margin-bottom: 20px;
      display: none;
    }
    @media print {
      body { background: #fff; color: #000; }
      .submit-button, .dontknow-button, .toggle-button, .ppt-button, #reportBtn, #reportModal {
        display: none !important;
      }
      #name-container { display: none !important; }
    }
    #reportBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff4757;
      color: white;
      border: none;
      padding: 12px 18px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.3);
      z-index: 1000;
    }
    #reportModal {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      background: #1e1e1e;
      border: 1px solid #444;
      padding: 15px;
      border-radius: 8px;
      width: 260px;
      z-index: 1001;
    }
    #reportModal textarea {
      width: 100%;
      height: 80px;
      padding: 8px;
      border: none;
      border-radius: 4px;
      resize: none;
      font-size: 14px;
    }
    #reportModal button {
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    #sendReport { background: #28a745; color: white; }
    #closeReport { background: #dc3545; color: white; margin-left: 5px; }
    img { max-width: 100%; height: auto; }
    @media (max-width: 480px) {
      .submit-button, .dontknow-button { width: 100%; margin-bottom: 10px; }
    }
    #scoreTable { overflow-x: auto; display: block; width: 100%; }
    .type-label {
      font-size: 10px;
      font-weight: bold;
      color:  #FFD700;
      margin-bottom: 6px;
    }
	.correct-option {
  background: #155724 !important;
  color: #d4edda !important;
}
.wrong-option {
  background: #721c24 !important;
  color: #f8d7da !important;
}
/* Left-align MathJax display equations */

mjx-container[jax="CHTML"][display="true"] {
  text-align: left !important;
  margin-left: 10px !important;
  margin-right: auto !important;
}


  </style>

  <!-- MathJax Configuration -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(','\\)'], ['$', '$']], 
        displayMath: [['$$','$$'], ['\\[','\\]']],
        processEscapes: true
      },
      options: { skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'] }
    };
	const allowedNames = ["Gargi Mohan", "Joysmits", "Jiten", "Charlie", "David", "Eva"];  // Add more names here
  </script>
 

  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

<img id="logo" src="https://i.ibb.co/WNZTWPwv/LOGO-PNG-2025-fab.png" alt="Logo" />

<div id="studentPrintName"></div>
<div id="examDateTime"></div>

<div id="name-container">
  <h2>Enter your name to begin</h2>
  <input type="text" id="studentNameInput" placeholder="Your Name" />
  <button class="submit-button" onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quiz-container">

  <h2> Quiz – _____________________________</h2>
  
  <p><strong>Time Elapsed:</strong> <span id="timer">00:00</span></p>
  <div id="questions-container"></div>

  <div style="margin-top:30px;">
    <button class="submit-button" onclick="finalSubmit()">Final Submit</button>
    <button class="submit-button" onclick="printQuestions()">Print Questions</button>
    <button class="submit-button" id="printScoreBtn" onclick="printScorecard()" style="display:none;">Save or Print Scorecard</button>
    <button class="submit-button" id="shareWhatsappBtn" style="display:none;">SHARE on WhatsApp</button>
  </div>

  <div id="scorecard">
    <h3>Your Scorecard</h3>
    <p id="scoreText"></p>
    <table id="scoreTable" border="1" cellspacing="0" cellpadding="6" style="border-collapse:collapse; margin-top:15px;">
      <thead style="background:#333;color:#fff;">
        <tr>
          <th>Q.No</th>
          <th>Question</th>
          <th>Your Answer</th>
          <th>Correct Answer</th>
          <th>Result</th>
          <th>Solution</th>
          <th>Marks</th>
        </tr>
      </thead>
      <tbody id="scoreDetails"></tbody>
    </table>
  </div>
</div>

<button id="reportBtn">Report Mistake / Have a Doubt</button>

<div id="reportModal">
  <textarea id="reportMsg" placeholder="Describe the mistake..."></textarea>
  <div style="text-align:right;">
    <button id="sendReport">Send</button>
    <button id="closeReport">Close</button>
  </div>
</div>

<script>
/* === Quiz data === */
const Q = [
  {
    "id": "q1",
    "text": "An ideal solution was obtained by mixing (MeOH) methanol and (EtOH) ethanol. If the partial vapour pressure of methanol and ethanol are $2.619\\ \\mathrm{kPa}$ and $4.556\\ \\mathrm{kPa}$ respectively, the composition of vapour (in terms of mole fraction) will be -",
    "options": [
      "A) $0.635\\ \\mathrm{MeOH},\\ 0.365\\ \\mathrm{EtOH}$",
      "B) $0.365\\ \\mathrm{MeOH},\\ 0.635\\ \\mathrm{EtOH}$",
      "C) $0.574\\ \\mathrm{MeOH},\\ 0.326\\ \\mathrm{EtOH}$",
      "D) $0.173\\ \\mathrm{MeOH},\\ 0.827\\ \\mathrm{EtOH}$"
    ],
    "correct": "B",
    "solution": "Using $y_{\\mathrm{MeOH}}=\\dfrac{p_{\\mathrm{MeOH}}}{p_{\\mathrm{MeOH}}+p_{\\mathrm{EtOH}}}=\\dfrac{2.619}{2.619+4.556}\\approx0.3650$, so vapour composition is $y_{\\mathrm{MeOH}}\\approx0.3650,\\;y_{\\mathrm{EtOH}}\\approx0.6350$.",
       "solution_steps": [
    "This problem asks to identify the solution with the highest boiling point, assuming each salt is 90% dissociated.",
    "The boiling point elevation is directly proportional to the molality of the solution and the van't Hoff factor \\(i\\).",
    "Since all solutions are decimolar, we need to compare the van't Hoff factor \\(i\\).",
    "Step 1: Calculate the van't Hoff factor \\(i\\) for each salt.",
    "The van't Hoff factor is calculated as",
    "$$i = 1 + \\alpha (n - 1)$$ where",
    "\\(\\alpha\\) is the degree of dissociation and",
    "\\(n\\) is the number of ions produced per formula unit.",
    "Given \\(\\alpha = 0.9\\).",
    "(A) \\(\\text{Al}_2(\\text{SO}_4)_3\\):",
    "$$n = 2(\\text{Al}^{3+}) + 3(\\text{SO}_4^{2-}) = 5$$",
    "$$i = 1 + 0.9(5 - 1)$$",
    "$$= 1 + 0.9 \\times 4$$",
    "$$= 1 + 3.6$$",
    "$$= 4.6$$",
    "(B) \\(\\text{BaCl}_2\\):",
    "$$n = 1(\\text{Ba}^{2+}) + 2(\\text{Cl}^{-}) = 3$$",
    "$$i = 1 + 0.9(3 - 1)$$",
    "$$= 1 + 0.9 \\times 2$$",
    "$$= 1 + 1.8$$",
    "$$= 2.8$$",
    "(C) \\(\\text{Na}_2\\text{SO}_4\\):",
    "$$n = 2(\\text{Na}^{+}) + 1(\\text{SO}_4^{2-}) = 3$$",
    "$$i = 1 + 0.9(3 - 1)$$",
    "$$= 1 + 0.9 \\times 2$$",
    "$$= 1 + 1.8$$",
    "$$= 2.8$$",
    "(D) A solution obtained by mixing equal volumes of (B) and (C):",
    "Since equal volumes are mixed and both (B) and (C) are decimolar, the resulting solution will contain half the concentration of \\(\\text{BaCl}_2\\) and half the concentration of \\(\\text{Na}_2\\text{SO}_4\\).",
    "The total effective concentration will be the sum of the effective concentrations of \\(\\text{BaCl}_2\\) and \\(\\text{Na}_2\\text{SO}_4\\) in the mixture.",
    "Note: For a mixture of equal volumes of two decimolar solutions, the effective van't Hoff factor will be the average of the individual van't Hoff factors (assuming similar densities and ideal mixing).",
    "$$i_{\\text{mixture}} = \\frac{i_{\\text{BaCl}_2} + i_{\\text{Na}_2\\text{SO}_4}}{2}$$",
    "$$= \\frac{2.8 + 2.8}{2}$$",
    "$$= 2.8$$",
    "Alternatively, consider the total number of ions.",
    "If we mix equal volumes of \\(0.1\\, \\text{M}\\, \\text{BaCl}_2\\) and \\(0.1\\, \\text{M}\\, \\text{Na}_2\\text{SO}_4\\), the resulting solution will have \\(0.05\\, \\text{M}\\, \\text{BaCl}_2\\) and \\(0.05\\, \\text{M}\\, \\text{Na}_2\\text{SO}_4\\).",
    "The total concentration of ions will be proportional to",
    "$$0.05 \\times i_{\\text{BaCl}_2} + 0.05 \\times i_{\\text{Na}_2\\text{SO}_4} = 0.28$$",
    "Compare the van't Hoff factors.",
    "The solution with the highest van't Hoff factor will have the highest boiling point.",
    "$$i_{\\text{Al}_2(\\text{SO}_4)_3} = 4.6$$",
    "$$i_{\\text{BaCl}_2} = 2.8$$",
    "$$i_{\\text{Na}_2\\text{SO}_4} = 2.8$$",
    "$$i_{\\text{mixture}} = 2.8$$",
    "Answer:",
    "The correct option is (A) Decimolar \\(\\text{Al}_2(\\text{SO}_4)_3\\)."
  ]
  },
  {
    "id": "q2",
    "text": "Molar volume of liquid A (density $d = 0.8\\ \\mathrm{g\\,mL^{-1}}$) increases by a factor of $2000$ when it vaporises at $T=200\\ \\mathrm{K}$. Vapour pressure of liquid A at $200\\ \\mathrm{K}$ is (use $R = 0.08\\ \\mathrm{L\\,atm\\,mol^{-1}\\,K^{-1}}$). (Molar mass of A = $80\\ \\mathrm{g\\,mol^{-1}}$)",
    "options": [
      "A) $0.4\\ \\mathrm{atm}$",
      "B) $8\\ \\mathrm{atm}$",
      "C) $0.8\\ \\mathrm{atm}$",
      "D) $0.08\\ \\mathrm{atm}$"
    ],
    "correct": "D",
    "solution": "Liquid molar volume $V_\\ell=\\dfrac{M}{\\rho}=\\dfrac{80}{0.8}=100\\ \\mathrm{mL}=0.1\\ \\mathrm{L}$. Gas molar volume $V_g=2000\\times0.1=200\\ \\mathrm{L}$. By ideal gas law $P=\\dfrac{RT}{V}=\\dfrac{0.08\\times200}{200}=0.08\\ \\mathrm{atm}$.",
    "solution_steps": [
      "Step 1: Compute liquid molar volume: $\\displaystyle V_{\\ell}=\\frac{M}{\\rho}=\\frac{80\\ \\mathrm{g\\,mol^{-1}}}{0.8\\ \\mathrm{g\\,mL^{-1}}}=100\\ \\mathrm{mL\\,mol^{-1}}=0.1\\ \\mathrm{L\\,mol^{-1}}$.",
      "Step 2: On vaporisation volume increases by factor 2000: $\\displaystyle V_g=2000\\times0.1\\ \\mathrm{L}=200\\ \\mathrm{L\\,mol^{-1}}$.",
      "Step 3: Use ideal gas relation $\\displaystyle P=\\frac{RT}{V}$. So $\\displaystyle P=\\frac{0.08\\times200}{200}=0.08\\ \\mathrm{atm}$."
    ]
  },
  {
    "id": "q3",
    "text": "Assuming each salt to be $90\\%$ dissociated, which of the following will have the highest boiling point? (A) Decimolar $\\mathrm{Al_2(SO_4)_3}$  (B) Decimolar $\\mathrm{BaCl_2}$  (C) Decimolar $\\mathrm{Na_2SO_4}$  (D) A solution obtained by mixing equal volumes of (B) and (C).",
    "options": [
      "A) Decimolar $\\mathrm{Al_2(SO_4)_3}$",
      "B) Decimolar $\\mathrm{BaCl_2}$",
      "C) Decimolar $\\mathrm{Na_2SO_4}$",
      "D) Mix equal volumes of (B) and (C)"
    ],
    "correct": "A",
    "solution": "Boiling point elevation is proportional to $m\\times i$. For $c=0.1\\ \\mathrm{M}$ and $\\alpha=0.90$: $\\mathrm{Al_2(SO_4)_3}$ gives $i=1+(5-1)\\alpha=4.6$ so $c i=0.1\\times4.6=0.46$, the largest → (A).",
    "solution_steps": [
      "Step 1: For an electrolyte producing $n$ ions and degree of dissociation $\\alpha$, van't Hoff factor $i=1+(n-1)\\alpha$.",
      "Step 2: Determine $n$ and $i$ for each (initial concentration $c=0.1\\ \\mathrm{M}$):",
      "  * $\\mathrm{Al_2(SO_4)_3}\\to 2\\,\\mathrm{Al^{3+}}+3\\,\\mathrm{SO_4^{2-}}$ so $n=5$. Then $i=1+(5-1)\\times0.90=1+4\\times0.90=4.6$. Contribution $c\\,i=0.1\\times4.6=0.46$.",
      "  * $\\mathrm{BaCl_2}\\to\\mathrm{Ba^{2+}}+2\\,\\mathrm{Cl^-}$ so $n=3$. Then $i=1+(3-1)\\times0.90=1+2\\times0.90=2.8$. Contribution $=0.1\\times2.8=0.28$.",
      "  * $\\mathrm{Na_2SO_4}\\to2\\,\\mathrm{Na^+}+\\mathrm{SO_4^{2-}}$ so $n=3$, $i=2.8$. Contribution $=0.28$.",
      "  * Mixing equal volumes of (B) and (C) halves concentrations to $0.05\\ \\mathrm{M}$ each. If no precipitation, total effective $c\\,i=0.05\\times2.8+0.05\\times2.8=0.28$ (same as single 0.1 M of BaCl_2 or Na_2SO_4).",
      "Step 3: Compare: $0.46>0.28$ ⇒ highest boiling point is option (A) $\\mathrm{Al_2(SO_4)_3}$."
    ]
  },
  {
    "id": "q4",
    "text": "The vapour pressure of a saturated solution of a sparingly soluble salt $\\mathrm{XCl_3}$ was $17.20\\ \\mathrm{mmHg}$ at $27^\\circ\\mathrm{C}$. If the vapour pressure of pure water is $17.25\\ \\mathrm{mmHg}$ at $300\\ \\mathrm{K}$, what is the solubility of $\\mathrm{XCl_3}$ in mol L$^{-1}$?",
    "options": [
      "A) $4.04\\times10^{-2}\\ \\mathrm{mol\\,L^{-1}}$",
      "B) $8.08\\times10^{-2}\\ \\mathrm{mol\\,L^{-1}}$",
      "C) $2.02\\times10^{-2}\\ \\mathrm{mol\\,L^{-1}}$",
      "D) $4.04\\times10^{-3}\\ \\mathrm{mol\\,L^{-1}}$"
    ],
    "correct": "A",
    "solution": "Let solubility be $s\\ (\\mathrm{mol\\,L^{-1}})$. $\\mathrm{XCl_3\\to X^{3+}+3Cl^-}$ (4 particles). Using vapour lowering $x_{\\text{solute}}=\\dfrac{p^0-p}{p^0}=\\dfrac{0.05}{17.25}\\approx0.00289855$, and $x_{\\text{solute}}=\\dfrac{4s}{55.5556+4s}$. Solving gives $s\\approx4.04\\times10^{-2}\\ \\mathrm{mol\\,L^{-1}}$.",
     "solution_steps": [
    "Step 1: Write down the given information and relevant formulas",
    "Vapor pressure of the solution, \\(P_{solution}=17.20\\) mm Hg",
    "Vapor pressure of pure water, \\(P_{water}^{\\circ}=17.25\\) mm Hg",
    "The salt is a sparingly soluble salt, \\(XCl_{3}\\).",
    "The solvent is water, \\(H_{2}O\\).",
    "Molar mass of water, \\(M_{H_{2}O}=18\\) g/mol.",
    "The solubility of the salt in mol/L is to be calculated.",
    "The relative lowering of vapor pressure for a dilute solution containing a non-volatile electrolyte is given by Raoult's Law, modified with the van't Hoff factor, \\(i\\):",
    "$$\\frac{P_{water}^{\\circ}-P_{solution}}{P_{water}^{\\circ}} = i \\cdot \\chi_{solute}$$",
    "For a dilute solution, the mole fraction of the solute (\\(\\chi_{solute}\\)) can be approximated as:",
    "$$\\chi_{solute} \\approx \\frac{n_{solute}}{n_{water}}$$",
    "Combining these gives:",
    "$$\\frac{P_{water}^{\\circ}-P_{solution}}{P_{water}^{\\circ}} = i \\cdot \\frac{n_{solute}}{n_{water}}$$",
    "Here, \\(n_{solute}\\) is the total number of moles of ions formed from the salt.",
    "The van't Hoff factor, \\(i\\), is the number of ions the salt dissociates into.",
    "For \\(XCl_{3}\\), the dissociation is:",
    "$$XCl_{3} \\rightleftharpoons X^{3+} + 3Cl^{-}$$",
    "The total number of ions is 1 cation (\\(X^{3+}\\)) and 3 anions (\\(Cl^{-}\\)), so \\(i = 4\\).",
    "Step 2: Calculate the mole ratio",
    "Use the given vapor pressure values to find the ratio of moles of solute particles to moles of water.",
    "$$\\frac{17.25 - 17.20}{17.25} = 4 \\cdot \\frac{n_{solute}}{n_{water}}$$",
    "$$\\frac{0.05}{17.25} = 4 \\cdot \\frac{n_{solute}}{n_{water}}$$",
    "$$0.00289855 = 4 \\cdot \\frac{n_{solute}}{n_{water}}$$",
    "$$\\frac{n_{solute}}{n_{water}} = \\frac{0.00289855}{4} = 7.24637 \\times 10^{-4}$$",
    "Step 3: Calculate the solubility",
    "The solubility (\\(S\\)) in mol/L is the molarity of the solution.",
    "Molarity is moles of solute per liter of solution.",
    "For a very dilute solution, the volume of 1 kg of water (1 L) is approximately equal to the volume of the solution.",
    "Assuming the volume of the solution is 1 L, the mass of water is 1000 g.",
    "The number of moles of water in 1 L is:",
    "$$n_{water} = \\frac{1000\\text{ g}}{18\\text{ g/mol}} \\approx 55.55\\text{ mol}$$",
    "From the mole ratio in Step 2:",
    "$$n_{solute} = (7.24637 \\times 10^{-4}) \\times n_{water}$$",
    "$$n_{solute} = (7.24637 \\times 10^{-4}) \\times 55.55\\text{ mol}$$",
    "$$n_{solute} \\approx 0.04025\\text{ mol}$$",
    "Since we assumed 1 L of solution, the molarity (solubility) is:",
    "$$S = \\frac{0.04025\\text{ mol}}{1\\text{ L}} \\approx 4.025 \\times 10^{-2}\\text{ mol L}^{-1}$$",
    "Rounding to two significant figures, the solubility is \\(4.0 \\times 10^{-2}\\) mol L⁻¹.",
    "This matches option A in similar problems found in search results."
  ]
},
  {
    "id": "q5",
    "text": "A solution has a $1:4$ mole ratio of pentane to hexane. The vapour pressures of the pure hydrocarbons at $20^\\circ\\mathrm{C}$ are $440\\ \\mathrm{mmHg}$ for pentane and $120\\ \\mathrm{mmHg}$ for hexane. The mole fraction of pentane in the vapour phase would be:",
    "options": [
      "A) $0.200$",
      "B) $0.478$",
      "C) $0.549$",
      "D) $0.786$"
    ],
    "correct": "B",
    "solution": "Liquid mole fractions: $x_{\\mathrm{pentane}}=\\dfrac{1}{1+4}=0.2$, $x_{\\mathrm{hexane}}=0.8$. By Raoult's law $p_{\\mathrm{pentane}}=0.2\\times440=88\\ \\mathrm{mmHg}$, $p_{\\mathrm{hexane}}=0.8\\times120=96\\ \\mathrm{mmHg}$. Vapour mole fraction $y_{\\mathrm{pentane}}=\\dfrac{88}{88+96}=\\dfrac{11}{23}\\approx0.4783$.",
    "solution_steps": [
      "Step 1: Compute liquid mole fractions: $\\displaystyle x_{\\mathrm{pentane}}=\\frac{1}{1+4}=0.2$, $x_{\\mathrm{hexane}}=0.8$.",
      "Step 2: Apply Raoult's law for partial pressures: $\\displaystyle p_{\\mathrm{pentane}}=x_{\\mathrm{pentane}}P^0_{\\mathrm{pentane}}=0.2\\times440=88\\ \\mathrm{mmHg}$,",
      "  $\\displaystyle p_{\\mathrm{hexane}}=0.8\\times120=96\\ \\mathrm{mmHg}$.",
      "Step 3: Vapour mole fraction of pentane: $\\displaystyle y_{\\mathrm{pentane}}=\\frac{p_{\\mathrm{pentane}}}{p_{\\mathrm{pentane}}+p_{\\mathrm{hexane}}}=\\frac{88}{88+96}=\\frac{88}{184}=\\frac{11}{23}\\approx0.4783$."
    ]
  },
  {
    "id": "q6",
    "text": "For which of the following van't Hoff's factors is the value NOT correctly matched? .",
    "options": [
      "A) $\\mathrm{Na_2SO_4}$, $50\\%$, $i=2$",
      "B) $\\mathrm{K_3[Fe(CN)_6]}$, $75\\%$, $i=3.25$",
      "C) $\\mathrm{[Ag(NH_3)_2]Cl}$, $80\\%$, $i=1.8$",
      "D) $\\mathrm{[Cr(NH_3)_5Cl]SO_4}$, $90\\%$, $i=2.8$"
    ],
    "correct": "D",
    "solution": "Van't Hoff factor $\\displaystyle i=1+(n-1)\\alpha$. For $\\mathrm{[Cr(NH_3)_5Cl]SO_4}$ the salt dissociates into two ions ($n=2$) so $i=1+(2-1)\\times0.90=1.90$, not $2.8$. Hence (D) is incorrect.",
    "solution_steps": [
      "Step 1: Formula: $\\displaystyle i=1+(n-1)\\alpha$, where $n$ is number of particles on full dissociation and $\\alpha$ is degree of dissociation.",
      "Step 2 (A): $\\mathrm{Na_2SO_4\\to 2Na^++SO_4^{2-}}$, so $n=3$.", "With $\\alpha=0.50$, $\\displaystyle i=1+(3-1)\\times0.50=1+1=2.00$ → matches.",
      "Step 3 (B): $\\mathrm{K_3[Fe(CN)_6]\\to 3K^++[Fe(CN)_6]^{3-}}$, so $n=4$.", "With $\\alpha=0.75$, $\\displaystyle i=1+(4-1)\\times0.75=1+2.25=3.25$ → matches.",
      "Step 4 (C): $\\mathrm{[Ag(NH_3)_2]Cl\\to [Ag(NH_3)_2]^++Cl^-}$, so $n=2$.", "With $\\alpha=0.80$, $\\displaystyle i=1+(2-1)\\times0.80=1.80$ → matches.",
      "Step 5 (D): $\\mathrm{[Cr(NH_3)_5Cl]SO_4\\to [Cr(NH_3)_5Cl]^{2+}+SO_4^{2-}}$, so $n=2$.", "With $\\alpha=0.90$, $\\displaystyle i=1+(2-1)\\times0.90=1.90$. The given $i=2.8$ is incorrect → option (D) is NOT correctly matched."
    ]
  },
  {
    "id": "q7",
    "text": "In the depression of freezing point experiment, it is found that:<br>(I) The vapour pressure of the solution is less than that of pure solvent.<br>(II) The vapour pressure of the solution is more than that of pure solvent.<br>(III) Only solute molecules solidify at the freezing point.<br>(IV) Only solvent molecules solidify at the freezing point.",

    "options": [
      "A) I, II",
      "B) II, III",
      "C) I, IV",
      "D) I, II, III"
    ],
    "correct": "C",
    "solution": "(I) True, since vapour pressure of a solution is always lower than pure solvent. (II) False, vapour pressure is not higher. (III) False, solute does not solidify. (IV) True, only solvent molecules solidify at freezing point. Hence, correct: I and IV.",
    "solution_steps": [
      "Step 1: Depression of freezing point is a colligative property caused by lowering of vapour pressure of solution compared to pure solvent.",
      "Step 2: (I) True — $P_{solution} < P_{solvent}$.",
      "Step 3: (II) False — solution cannot have higher vapour pressure.",
      "Step 4: (III) False — solute molecules remain in liquid, not in solid lattice.",
      "Step 5: (IV) True — freezing involves crystallization of pure solvent molecules.",
      "Step 6: Thus correct statements are (I) and (IV) → option (C)."
    ]
  },
  {
    "id": "q8",
    "text": "Statement-1: Addition of ethylene glycol (non-volatile) to water lowers the freezing point of water hence used as antifreeze. Statement-2: Addition of any substance to water lowers its freezing point.",
    "options": [
      "A) Statement-1 is true, Statement-2 is true and Statement-2 is correct explanation for Statement-1",
      "B) Statement-1 is true, Statement-2 is true but Statement-2 is NOT the correct explanation for Statement-1",
      "C) Statement-1 is true, Statement-2 is false",
      "D) Statement-1 is false, Statement-2 is true"
    ],
    "correct": "C",
    "solution": "Statement-1 is correct because ethylene glycol is a non-volatile solute that lowers freezing point (colligative property). Statement-2 is false because not every substance lowers freezing point (e.g., volatile solutes or some solutes that interact differently).",
    "solution_steps": [
      "Step 1: Freezing point depression is given by $\\Delta T_f = iK_f m$.",
      "Step 2: Ethylene glycol is non-volatile, so $\\Delta T_f > 0$, thus freezing point decreases.",
      "Step 3: Statement-1 is therefore true.",
      "Step 4: Statement-2 says any substance lowers freezing point — false, because volatile solutes may not produce the same effect.",
      "Step 5: Hence correct option is (C)."
    ]
  },
  {
    "id": "q9",
    "text": "For an ideal solution having two liquids A ($P_A^0$) and B ($P_B^0$), the boiling point vs. composition graph is given. Select the incorrect statement(s):",
	"image": "https://i.ibb.co/zHfLvPGJ/q9mcqallen.jpg",
    "options": [
      "A) B is less volatile than A",
      "B) If mole percent of A in liquid phase is 40% then mole percent of A in vapour phase is 50%",
      "C) If mole percent of B in liquid phase is 10% then mole percent of B in vapour phase is 40%",
      "D) If mole percent of A in solution is 50% then its boiling point is 350 K"
    ],
    "correct": "C",
    "solution": "From the phase diagram: (A) is true because B has higher boiling point and hence is less volatile. (B) is true — Raoult’s law and vapour-liquid equilibrium support this. (C) is incorrect because if $x_B=0.10$, $y_B$ is closer to ~0.20, not 0.40. (D) is incorrect because at 50% mole fraction the boiling point lies between 300K and 400K but not exactly 350K.",
    "solution_steps": [
  "Step 1: The diagram represents a T-composition (temperature vs composition) phase diagram for a binary mixture of A and B. The lower curve is the liquid-phase curve that shows how the boiling point changes with the liquid composition \\(x_B\\), while the upper curve is the vapour-phase curve showing the vapour composition \\(y_B\\) at the same temperature.",
  
  "Step 2: Statement (A) claims that 'B is less volatile than A.' From the diagram, pure A boils at 300 K and pure B at 400 K. A lower boiling point means higher volatility, so A is more volatile than B, which makes this statement True.",
  
  "Step 3: Statement (B) says that 'If mole percent of A in liquid phase is 40% then mole percent of A in vapour phase is 50%.' Using \\(x_A = 0.40\\), we get \\(x_B = 1 - 0.40 = 0.60\\). By drawing a vertical line at \\(x_B = 0.60\\) up to the liquid curve and then a horizontal line to the vapour curve, we find that \\(y_B\\) is about 0.50. Therefore, \\(y_A = 1 - 0.50 = 0.50\\), confirming the statement is True.",
  
  "Step 4: Statement (C) says that 'If mole percent of B in liquid phase is 10% then mole percent of B in vapour phase is 40%.' Here, \\(x_B = 0.10\\), meaning B is a minor component. In systems where A is more volatile, the vapour is richer in A, hence \\(y_B\\) will be even less than \\(x_B\\), certainly not larger like 0.40. Thus, this statement is False.",
  
  "Step 5: Statement (D) says that 'If the mole percent of A in solution is 50% then its boiling point is 350 K.' With \\(x_A = 0.50\\), we get \\(x_B = 0.50\\). According to the diagram, at \\(x_B = 0.50\\), the boiling point from the liquid curve is exactly 350 K, confirming this statement is True.",
  
  "Step 6: Final conclusion — only statement (C) is inconsistent with the diagram. Statements (A), (B), and (D) are supported by the phase behaviour depicted in the diagram. Therefore, the correct answer is that only statement (C) is incorrect."
 ],
    "pptUrl": "https://gten-educational-platform.github.io/my-scorm-course/Course2/res/index.html"
  },
  {
    "id": "q10",
    "text": "A liquid mixture having composition corresponding to point Z in the figure shown is subjected to distillation at constant pressure. Which of the following statement is correct about the process?",
	"image": "https://i.ibb.co/v4V2N7GQ/q10mcq.jpg",
    "options": [
      "A) The composition of distillate differs from the mixture",
      "B) The boiling point goes on changing",
      "C) The mixture has lowest vapour pressure than for any other composition",
      "D) Composition of an azeotrope alters on changing the external pressure"
    ],
    "correct": "D",
    "solution": "At point Z, the mixture corresponds to an azeotrope. For azeotropes, distillate composition is the same as liquid composition (so A is false), boiling point is fixed (so B is false), and vapour pressure is not minimum for all compositions (so C is false). The correct fact is that azeotropic composition depends on external pressure, hence (D).",
    "solution_steps": [
  "Step 1: Analyze the provided diagram and identify point Z. The image shows a temperature-composition phase diagram for a binary liquid mixture. The x-axis represents the mole fraction (\\(x_A\\) for the liquid phase, \\(y_A\\) for the vapor phase), and the y-axis represents the temperature. Point Z is located at the intersection of the liquid and vapor phase curves, where the composition of the liquid phase (\\(x_A\\)) is equal to the composition of the vapor phase (\\(y_A\\)). This point represents an azeotropic mixture, specifically a minimum boiling azeotrope, because the temperature at point Z is lower than the boiling points of the pure components where \\(x_A = 0\\) or \\(x_A = 1\\).",

  "Step 2: Understand the properties of an azeotrope during distillation. An azeotrope is a constant-boiling mixture that distills without a change in composition, meaning the composition of the distillate is the same as the liquid mixture. This occurs because at the azeotropic point, the liquid and vapor phases have the same composition, hence no separation occurs during distillation.",

  "Step 3: Evaluate the given statements based on the properties of an azeotrope. Statement (A): 'The composition of distillate differs from the mixture.' This is incorrect because an azeotrope distills without change in composition; both the liquid and vapor phases have the same composition at the azeotropic point.",

  "Step 4: Statement (B): 'The boiling point goes on changing.' This is incorrect because an azeotrope is a constant-boiling mixture, meaning its boiling point remains constant during distillation, similar to a pure substance, regardless of the amount being distilled.",

  "Step 5: Statement (C): 'The mixture has lowest vapor pressure than for any other composition.' This is incorrect. A minimum boiling azeotrope, like the one at point Z, actually exhibits maximum vapor pressure at that composition compared to other compositions at the same temperature. Only a maximum boiling azeotrope would have the lowest vapor pressure.",

  "Step 6: Statement (D): 'Composition of an azeotrope alters on changing the external pressure.' This is correct because the azeotropic composition and boiling point depend on the external pressure. By changing the pressure, the azeotropic point shifts, resulting in a different composition and boiling temperature."
 ],
    "pptUrl": "https://gten-educational-platform.github.io/my-scorm-course/Course3/res/index.html"
  },
  {
    "id": "q11",
    "text": "Which of the following is correct for a non-ideal solution of liquids A and B showing negative deviation?",
    "options": [
      "A) $\\Delta H_{mix} = -ve$",
      "B) $\\Delta V_{mix} = -ve$",
      "C) $\\Delta S_{mix} = +ve$",
      "D) $\\Delta G_{mix} = -ve$"
    ],
    "correct": ["A","B","C","D"],
    "solution": "Negative deviation means stronger intermolecular attraction in the mixture compared to pure components. Hence enthalpy change $\\Delta H_{mix}$ is negative, volume change $\\Delta V_{mix}$ is negative, entropy change $\\Delta S_{mix}$ is positive (due to mixing), and free energy change $\\Delta G_{mix}$ is negative (spontaneous mixing).",
    "solution_steps": [
      "Step 1: For negative deviation: stronger interactions form → release of energy → $\\Delta H_{mix} < 0$ → (A) correct.",
      "Step 2: Stronger interactions → closer packing → $\\Delta V_{mix} < 0$ → (B) correct.",
      "Step 3: Mixing always increases disorder → $\\Delta S_{mix} > 0$ → (C) correct.",
      "Step 4: Spontaneous process → $\\Delta G_{mix} < 0$ → (D) correct.",
      "Step 5: Hence all (A, B, C, D) are correct."
    ]
  },
  {
    "id": "q12",
    "text": "Two solutions $S_1$ and $S_2$ containing 0.1 M NaCl(aq) and 0.08 M BaCl$_2$(aq) are separated by a semipermeable membrane. Which among the following statement(s) is/are correct?",
   "image": "https://i.ibb.co/jkQBBmv9/q12mcqallen.jpg",
   "options": [
      "A) $S_1$ and $S_2$ are isotonic",
      "B) $S_1$ is hypertonic and $S_2$ is hypotonic",
      "C) $S_1$ is hypotonic and $S_2$ is hypertonic",
      "D) Osmosis will take place from $S_1$ to $S_2$"
    ],
    "correct": "C",
    "solution": "Effective concentration is given by osmolarity = molarity × van’t Hoff factor $i$. For NaCl, $i=2$, so osmolarity = $0.1 \\times 2 = 0.20$ M. For BaCl$_2$, $i=3$, so osmolarity = $0.08 \\times 3 = 0.24$ M. Since $S_2$ has higher osmolarity, it is hypertonic, while $S_1$ is hypotonic. Osmosis will occur from $S_1$ to $S_2$.",
    "solution_steps": [
      "Step 1: For NaCl: $\\mathrm{NaCl \\to Na^+ + Cl^-}$, $i=2$. Osmolarity = $0.1 \\times 2 = 0.20$ M.",
      "Step 2: For BaCl$_2$: $\\mathrm{BaCl_2 \\to Ba^{2+} + 2Cl^-}$, $i=3$. Osmolarity = $0.08 \\times 3 = 0.24$ M.",
      "Step 3: Since $0.24 > 0.20$, $S_2$ is hypertonic, $S_1$ is hypotonic.",
      "Step 4: Osmosis occurs from dilute ($S_1$) to concentrated ($S_2$).",
      "Step 5: Correct option is (C)."
    ]
  },
  {
    "id": "q13",
    "text": "For an ideal binary liquid solution with $P_A^0 > P_B^0$, which relation between $X_A$ (mole fraction of A in liquid phase) and $Y_A$ (mole fraction of A in vapour phase) is correct?",
    "options": [
      "A) $Y_A < Y_B$",
      "B) $X_A > X_B$",
      "C) $\\dfrac{Y_A}{Y_B} = \\dfrac{X_A}{X_B}$",
      "D) $\\dfrac{Y_A}{Y_B} > \\dfrac{X_A}{X_B}$"
    ],
    "correct": "D",
    "solution": "According to Raoult’s law: $P_A = X_A P_A^0$, $P_B = X_B P_B^0$. Since $P_A^0 > P_B^0$, component A is more volatile and enriches in vapour phase, so $Y_A > X_A$. This leads to $\\dfrac{Y_A}{Y_B} > \\dfrac{X_A}{X_B}$.",
    "solution_steps": [
  "Step 1: Raoult's Law – For an ideal solution, the partial vapor pressure of each component is proportional to its mole fraction in the liquid phase and its vapor pressure as a pure component. This is expressed as:  $$P_{A} = X_{A} P_{A}^{\\circ}$$ and $$P_{B} = X_{B} P_{B}^{\\circ}$$ where \\(P_A\\) and \\(P_B\\) are the partial pressures of components A and B, \\(X_A\\) and \\(X_B\\) are their mole fractions in the liquid phase, and \\(P_A^{\\circ}\\) and \\(P_B^{\\circ}\\) are the vapor pressures of pure A and B respectively.",

  "Step 2: Dalton's Law of Partial Pressures – The mole fraction of a component in the vapor phase is given by the ratio of its partial pressure to the total pressure: $$Y_{A} = \\frac{P_{A}}{P_{total}}$$ and $$Y_{B} = \\frac{P_{B}}{P_{total}}$$. From this, the ratio of vapor phase mole fractions is: $$\\frac{Y_{A}}{Y_{B}} = \\frac{P_{A}}{P_{B}}$$.",

  "Step 3: Combining Raoult's and Dalton's Laws – By substituting the expressions from Raoult's Law into the ratio of vapor phase mole fractions, we get: $$\\frac{Y_{A}}{Y_{B}} = \\frac{X_{A} P_{A}^{\\circ}}{X_{B} P_{B}^{\\circ}}$$ which simplifies to $$\\frac{Y_{A}}{Y_{B}} = \\frac{X_{A}}{X_{B}} \\times \\frac{P_{A}^{\\circ}}{P_{B}^{\\circ}}$$.",

  "Step 4: Applying the given condition – We are given that the vapor pressure of pure A is greater than that of pure B, i.e., \\(P_{A}^{\\circ} > P_{B}^{\\circ}\\). Therefore, the ratio \\(\\frac{P_{A}^{\\circ}}{P_{B}^{\\circ}} > 1\\).",

  "Step 5: Conclusion – Since \\(\\frac{P_{A}^{\\circ}}{P_{B}^{\\circ}} > 1\\), it follows that: $$\\frac{Y_{A}}{Y_{B}} > \\frac{X_{A}}{X_{B}}$$. This means the mole fraction of A in the vapor phase is higher relative to B compared to their mole fractions in the liquid phase."
]
  },
  {
    "id": "q14",
    "text": "Which of the following plots represents an ideal binary mixture?",
    "options": [
      "A) Plot of $P_{\\text{total}}$ vs $1/X_B$ is linear ($X_B$ = mole fraction of B in liquid phase).",
      "B) Plot of $P_{\\text{total}}$ vs $Y_A$ is linear ($Y_A$ = mole fraction of A in vapour phase).",
      "C) Plot of $\\dfrac{1}{P_{\\text{total}}}$ vs $Y_A$ is linear.",
      "D) Plot of $\\dfrac{1}{P_{\\text{total}}}$ vs $Y_B$ is non linear."
    ],
    "correct": "C",
    "solution": "Using Raoult's law for an ideal binary mixture, $P_{\\text{total}}=X_A P_A^0 + X_B P_B^0$ and $Y_A=\\dfrac{X_A P_A^0}{P_{\\text{total}}}$. One can rearrange to obtain $\\dfrac{1}{P_{\\text{total}}}=\\dfrac{Y_A}{X_A P_A^0}$, which (when $X_A$ and $Y_A$ vary together for ideal behaviour) yields a linear relation between $1/P_{\\text{total}}$ and $Y_A$. Hence (C) is correct.",
    
  "solution_steps": [
    "(A) \\(P_{total}\\) vs \\(1/X_{B}\\)",
    "Reason:",
    "According to Raoult’s law, \\(P_{total}\\) is a linear function of \\(X_{B}\\). That means \\(P_{total}\\) increases or decreases in direct proportion to \\(X_{B}\\).",
    "If you plot it against \\(1/X_{B}\\), you are plotting a linear function against the reciprocal of the variable, which makes the plot curved, not straight.",
    "✔ So, this plot is nonlinear.",
    "",
    "(B) \\(P_{total}\\) vs \\(Y_{A}\\)",
    "Reason:",
    "Dalton’s law defines \\(Y_{A}\\) as a ratio involving partial pressures (\\(P_{A}/P_{total}\\)). As the composition changes, the relationship between total pressure and vapor composition becomes more complicated, involving divisions and nonlinear terms.",
    "✔ Hence, this plot is nonlinear.",
    "",
    "(C) \\(1/P_{total}\\) vs \\(Y_{A}\\)",
    "Reason:",
    "Combining Raoult’s law (\\(P_{A} = X_{A} P_{A}^{\\circ}\\)) and Dalton’s law (\\(Y_{A} = P_{A}/P_{total}\\)) gives a formula where \\(1/P_{total}\\) is proportional to \\(Y_{A}\\). This makes the relationship linear because the complex dependencies cancel out under ideal assumptions.",
    "✔ So, this plot is linear.",
    "",
    "(D) \\(1/P_{total}\\) vs \\(Y_{B}\\)",
    "Reason:",
    "Similar to option B, but involving \\(Y_{B}\\), which depends on \\(P_{B}\\) and the total pressure in a nonlinear way. The interactions between mole fractions and partial pressures are too complex for this plot to be linear.",
    "✔ Thus, this plot is nonlinear.",
    "",
    "✅ Final Summary:",
    "Linear plots occur only when the mathematical relationship between pressure and composition is directly proportional.",
    "Nonlinear plots arise when the relationship involves divisions, reciprocals, or more complex dependencies between variables."
  ]

  },
  {
    "id": "q15",
    "text": "An ideal solution is obtained by mixing a non-volatile solute B with a volatile solvent A (molar mass of A = $60\\ \\mathrm{g\\,mol^{-1}}$). If the mass ratio of A : B in solution is $10:1$ and vapour pressure of pure A is $400\\ \\mathrm{mmHg}$ and vapour pressure decreases by $4\\%$ on forming the above solution at $300\\ \\mathrm{K}$, the mole fraction of solute in the solution is -",
    "options": [
      "A) 0.96",
      "B) 0.04",
      "C) 0.16",
      "D) 0.84"
    ],
    "correct": "B",
    "solution": "For a non-volatile solute, $p_{\\text{solution}}=x_A p_A^0$. Given $p_{\\text{solution}}=0.96\\,p_A^0$, so $x_A=0.96$. Therefore mole fraction of solute (B) is $x_B=1-x_A=1-0.96=0.04$.",
    "solution_steps": [
      "Step 1: For non-volatile solute, Raoult's-law form: $p_{\\text{solution}}=x_A p_A^0$.",
      "Step 2: Given vapour pressure decreases by $4\\%$ ⇒ $p_{\\text{solution}}=0.96\\,p_A^0$. Thus $x_A=0.96$.",
      "Step 3: Mole fraction of solute $x_B=1-x_A=1-0.96=0.04$."
    ]
  },
  {
    "id": "q16",
    "text": "Using the data from Q15, the molality of the solution is -",
    "options": [
      "A) 1",
      "B) $\\dfrac{36}{25}$",
      "C) $\\dfrac{25}{36}$",
      "D) $\\dfrac{36}{25}$"
    ],
    "correct": "C",
    "solution": "With mass ratio A:B = 10 g : 1 g, moles of A = $10/60 = 1/6$ mol. From Q15 we found moles of B $n_B$ by solving $\\dfrac{n_B}{n_B+1/6}=0.04$, giving $n_B=0.0069444444\\ \\mathrm{mol}$. Molality $m = n_{\\text{solute}}\\, /\\, \\text{kg solvent} = 0.0069444444 / 0.01 = 0.694444... = \\dfrac{25}{36}$.",
    "solution_steps": [
      "Step 1: Take 10 g A and 1 g B (mass ratio 10:1). Moles of A: $n_A=\\dfrac{10}{60}=\\dfrac{1}{6}=0.1666667\\ \\mathrm{mol}$.",
      "Step 2: Denote $n_B$ the moles of solute. Mole fraction of solute $x_B=\\dfrac{n_B}{n_B+n_A}=0.04$ ⇒ $n_B=0.04(n_B+1/6)$.",
      "Step 3: Solve: $0.96 n_B = 0.04\\times\\dfrac{1}{6}=\\dfrac{0.04}{6}=0.0066666667$ ⇒ $n_B\\approx0.0069444444\\ \\mathrm{mol}$.",
      "Step 4: Molality $m=\\dfrac{n_B}{\\text{kg solvent}}=\\dfrac{0.0069444444}{10\\ \\mathrm{g}=0.010\\ \\mathrm{kg}}=0.69444444=\\dfrac{25}{36}$."
    ]
  },
  {
    "id": "q17",
    "text": "Using the same data, the molar mass of B in the solution is -",
    "options": [
      "A) 1440",
      "B) 14400",
      "C) 4",
      "D) 144"
    ],
    "correct": "D",
    "solution": "We used 1 g of B and found $n_B\\approx0.0069444444$ mol. Molar mass $M_B = \\dfrac{\\text{mass}}{\\text{moles}}=\\dfrac{1\\ \\mathrm{g}}{0.0069444444\\ \\mathrm{mol}}\\approx144\\ \\mathrm{g\\,mol^{-1}}$.",
    "solution_steps": [
      "Step 1: From Q16, $n_B\\approx0.0069444444\\ \\mathrm{mol}$ present in 1 g sample of solute.",
      "Step 2: Molar mass $M_B=\\dfrac{1\\ \\mathrm{g}}{0.0069444444\\ \\mathrm{mol}}\\approx144\\ \\mathrm{g\\,mol^{-1}}$."
    ]
  },
];

/* === State === */
let student = '';
let timerHandle;
let printMode = '';
let examDateTime = '';
const quizTitle = document.title;

/* === Start quiz === */
function startQuiz() {
  const name = document.getElementById('studentNameInput').value.trim();
  if (!name) { 
    alert('Please enter your name.');
    return;
  }

  // Check if the name is in the allowed list (case insensitive)
  const isAllowed = allowedNames.some(allowed => allowed.toLowerCase() === name.toLowerCase());
  if (!isAllowed) {
    alert('Access denied! Your name is not register. Please contact your teacher # 08069409455.');
    return;
  }

  student = name;
  examDateTime = new Date().toLocaleString();
  document.getElementById('name-container').style.display = 'none';
  document.getElementById('quiz-container').style.display = 'block';
  buildQuestions();
  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
  startTimer();
}


/* === Build questions === */
function buildQuestions() {
  const out = document.getElementById('questions-container');
  out.innerHTML = '';
  Q.forEach((q, index) => {
    const qText = q.text || '';
    let entries = q.options.map((opt, i) => [String.fromCharCode(65 + i), opt]);
    const correct = q.correct;
    const isMulti = Array.isArray(correct);
    const inputType = isMulti ? "checkbox" : "radio";
    const typeLabel = isMulti ? "Multiple Correct" : "Single Correct";

    const optionsHTML = entries.map(([letter, opt]) => {
      return `<label class="option-item">
                <input type="${inputType}" id="${q.id}-${letter}" name="${q.id}${isMulti ? '[]' : ''}" value="${letter}" onchange="enableSubmit('${q.id}')">
                ${letter}. ${opt}
              </label>`;
    }).join('');

    // ✅ Only add PPT button if pptUrl exists
    const pptBtnHTML = q.pptUrl 
      ? `<button class="ppt-button" id="ppt-${q.id}" onclick="openPPT('${q.pptUrl}')">📑 PPT Presentation</button>`
      : "";

    // ✅ Add image rendering if available
    const imgHTML = q.image 
      ? `<div style="margin:10px 0;"><img src="${q.image}" alt="Question Image"></div>` 
      : "";

    out.insertAdjacentHTML('beforeend', `
      <div class="question" id="${q.id}-wrap">
        <h3>Q${index + 1}. ${qText}</h3>
        ${imgHTML}  <!-- 👈 This will show images -->
        <div class="type-label">[${typeLabel}]</div>
        <div class="options">${optionsHTML}</div>
        <div class="buttons" id="${q.id}-buttons">
          <button id="sub-${q.id}" class="submit-button" disabled onclick="grade('${q.id}')">Submit</button>
          <button class="dontknow-button" onclick="skip('${q.id}')">I Don’t Know</button>
        </div>
        <button class="toggle-button" id="btn-sol-${q.id}" style="display:none;" onclick="toggleSolution('sol-${q.id}','${q.id}')">Show Solution</button>
       <div class="solution" id="sol-${q.id}">
  <strong>Solution:</strong> ${q.solution || ''}
  ${q.solution_steps ? q.solution_steps.map(step => `<p>${step}</p>`).join('') : ''}

</div>

        ${pptBtnHTML}
      </div>
    `);
  });
  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}



/* enable submit */
function enableSubmit(qid){ document.getElementById(`sub-${qid}`).disabled = false; }

/* open PPT */
function openPPT(url){ window.open(url,"_blank"); }
function showPPTButton(qid){ const b=document.getElementById(`ppt-${qid}`); if(b) b.style.display="inline-block"; }

/* grade */
function grade(qid) {
  const q = Q.find(x => x.id === qid);
  const correct = q.correct;
  const isMulti = Array.isArray(correct);

  // disable all inputs
  document.querySelectorAll(`#${qid}-wrap input`).forEach(i => i.disabled = true);

  // show solution & PPT button
  document.getElementById(`sol-${qid}`).style.display = 'block';
  showPPTButton(qid);

  // mark answers
  if (!isMulti) {
    const chosen = document.querySelector(`input[name="${q.id}"]:checked`);
    if (chosen) {
      if (chosen.value === correct) {
        // correct
        chosen.parentElement.classList.add("correct-option");
      } else {
        // wrong
        chosen.parentElement.classList.add("wrong-option");
        // highlight the right one
        const right = document.getElementById(`${q.id}-${correct}`);
        if (right) right.parentElement.classList.add("correct-option");
      }
    }
  } else {
    // MSQ: multiple correct
    const chosenVals = [...document.querySelectorAll(`#${q.id}-wrap input:checked`)].map(x => x.value);
    chosenVals.forEach(val => {
      if (correct.includes(val)) {
        document.getElementById(`${q.id}-${val}`).parentElement.classList.add("correct-option");
      } else {
        document.getElementById(`${q.id}-${val}`).parentElement.classList.add("wrong-option");
      }
    });
    correct.forEach(val => {
      const el = document.getElementById(`${q.id}-${val}`);
      if (el) el.parentElement.classList.add("correct-option");
    });
  }

  // hide buttons
  const buttonsDiv = document.getElementById(`${qid}-buttons`);
  if (buttonsDiv) buttonsDiv.style.display = 'none';
}


/* skip */
function skip(qid){
  document.querySelectorAll(`#${qid}-wrap input`).forEach(r => { r.checked = false; r.disabled = true; });
  showSolutionButton(qid);
}
function showSolutionButton(qid){
  const btn = document.getElementById(`btn-sol-${qid}`);
  if (btn) btn.style.display = 'inline-block';
  const buttonsDiv = document.getElementById(`${qid}-buttons`);
  if (buttonsDiv) buttonsDiv.style.display = 'none';
}
function toggleSolution(id,qid){
  const e = document.getElementById(id);
  e.style.display = e.style.display === 'block' ? 'none' : 'block';
  if (e.style.display === 'block') showPPTButton(qid);
}

/* timer, finalSubmit, print, shareOnWhatsApp, report handlers ... remain unchanged */
/* Timer */
function startTimer(){
  const display = document.getElementById('timer');
  const started = Date.now();
  timerHandle = setInterval(() => {
    const s = Math.floor((Date.now() - started) / 1000);
    display.textContent = `${String((s / 60) | 0).padStart(2,'0')}:${String(s % 60).padStart(2,'0')}`;
  }, 1000);
}

/* Final submit & scoring:
   - Not Attempted (no selections) => 0 marks
   - MCQ: correct => +4, wrong => -1
   - MSQ: full correct only => +4, otherwise => -1
*/
function finalSubmit(){
  clearInterval(timerHandle);
  document.querySelectorAll("input").forEach(r => r.disabled = true);
  document.querySelectorAll(".submit-button, .dontknow-button").forEach(b => b.style.display = "none");

  let totalMarks = 0, negativeMarks = 0, possibleMarks = Q.length * 4;
  let detailHTML = '';

  Q.forEach((q, i) => {
    const correct = q.correct || q.answer;
    const isMulti = Array.isArray(correct);
    let chosenVals = [];

    if (isMulti) {
      chosenVals = [...document.querySelectorAll(`#${q.id}-wrap input:checked`)].map(x => x.value);
    } else {
      const c = document.querySelector(`input[name="${q.id}"]:checked`);
      if (c) chosenVals = [c.value];
    }

    let marks = 0, resultText = '';

    if (chosenVals.length === 0) {
      // Not attempted => 0 marks
      marks = 0;
      resultText = "⚪ Not Attempted (0)";
    } else if (!isMulti) {
      // MCQ
      if (chosenVals[0] === correct) { marks = 4; resultText = "✅ Correct (+4)"; }
      else { marks = -1; resultText = "❌ Incorrect (-1)"; }
    } else {
      // MSQ: full correct only -> +4; else -1
      const correctSet = new Set(correct);
      const selectedSet = new Set(chosenVals);
      const isExactlySame = (correctSet.size === selectedSet.size) && [...correctSet].every(v => selectedSet.has(v));
      if (isExactlySame) { marks = 4; resultText = "✅ Correct (+4)"; }
      else { marks = -1; resultText = "❌ Incorrect (-1)"; }
    }

    if (marks > 0) totalMarks += marks; else negativeMarks += marks;

    detailHTML += `<tr>
      <td>${i + 1}</td>
      <td>${q.text || q.question}</td>
      <td>${chosenVals.join(", ") || 'Not Answered'}</td>
      <td>${isMulti ? correct.join(", ") : correct}</td>
      <td>${resultText}</td>
      <td>${q.solution || ''}</td>
      <td>${marks}</td>
    </tr>`;
  });

  const finalScore = totalMarks + negativeMarks;
  document.getElementById('scoreText').innerHTML = `${student}, here is your result:`;
  document.getElementById('scoreDetails').innerHTML = detailHTML;

  // Append summary (keeps exactly same behavior as original)
  document.getElementById('scorecard').insertAdjacentHTML('beforeend', `
    <div style="margin-top:20px; font-weight:bold;">
      <p>Total Marks (Possible): ${possibleMarks}</p>
      <p>Total Marks (Correct Answers): ${totalMarks.toFixed(2)}</p>
      <p>Negative Marks (Wrong Answers): ${negativeMarks.toFixed(2)}</p>
      <p>Final Score: ${finalScore.toFixed(2)}</p>
    </div>
  `);

  document.getElementById('scorecard').style.display = 'block';
  const pbtn = document.getElementById('printScoreBtn');
  const sbtn = document.getElementById('shareWhatsappBtn');
  if (pbtn) pbtn.style.display = 'inline-block';
  if (sbtn) sbtn.style.display = 'inline-block';

  if (window.MathJax && typeof MathJax.typesetPromise === 'function') MathJax.typesetPromise();
}

/* Print handlers */
function printQuestions(){ printMode = "questions"; window.print(); }
function printScorecard(){
  document.getElementById("studentPrintName").innerText = student;
  document.getElementById("examDateTime").innerText = "Exam Date & Time: " + examDateTime;
  document.getElementById("studentPrintName").style.display = "block";
  document.getElementById("examDateTime").style.display = "block";
  printMode = "scorecard"; window.print();
}

window.addEventListener('beforeprint', () => {
  if (printMode === "questions") {
    document.querySelector("#questions-container").style.display = "block";
    document.querySelector("#scorecard").style.display = "none";
    document.querySelector("#logo").style.display = "none";
    document.querySelector("#name-container").style.display = "none";
    document.querySelector("#timer").style.display = "none";
    document.querySelector("#studentPrintName").style.display = "none";
    document.querySelector("#examDateTime").style.display = "none";
  }
  if (printMode === "scorecard") {
    document.querySelector("#questions-container").style.display = "none";
    document.querySelector("#scorecard").style.display = "block";
    document.querySelector("#logo").style.display = "block";
    document.querySelector("#name-container").style.display = "none";
    document.querySelector("#studentPrintName").style.display = "block";
    document.querySelector("#examDateTime").style.display = "block";
  }
});

window.addEventListener('afterprint', () => {
  document.querySelector("#questions-container").style.display = "";
  document.querySelector("#scorecard").style.display = "";
  document.querySelector("#logo").style.display = "";
  document.querySelector("#name-container").style.display = "";
  document.querySelector("#timer").style.display = "";
  document.getElementById("studentPrintName").style.display = "none";
  document.getElementById("examDateTime").style.display = "none";
  printMode = "";
});

/* WhatsApp share */
function shareOnWhatsApp(){
  const scoreText = document.getElementById('scoreText').innerText;
  const details = [...document.querySelectorAll('#scoreDetails tr')].map(row => {
    const cells = row.querySelectorAll('td');
    return `Q${cells[0].innerText}: ${cells[1].innerText}\nYour Ans: ${cells[2].innerText}\nCorrect Ans: ${cells[3].innerText}\nResult: ${cells[4].innerText}\n`;
  }).join('\n');

  const msg = `📘 Quiz Title: ${quizTitle}\n👤 Student: ${student}\n\n${scoreText}\n\n${details}`;
  window.open(`https://wa.me/9108069409455?text=${encodeURIComponent(msg)}`, "_blank");
}

document.getElementById('shareWhatsappBtn').onclick = shareOnWhatsApp;

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('sendReport').onclick = () => {
    const msg = document.getElementById('reportMsg').value.trim();
    if (!msg) { 
      alert("Write message first"); 
      return; 
    }
    if (!student) {
      alert("Please start the quiz before reporting.");
      return;
    }
    const payload = `⚠️ Reported Mistake / Have a Doubt\nQuiz: ${quizTitle}\nStudent: ${student}\n\n${msg}`;
    window.open(`https://wa.me/9108069409455?text=${encodeURIComponent(payload)}`, "_blank");
    document.getElementById('reportModal').style.display = "none";
    document.getElementById('reportMsg').value = "";
  };

  document.getElementById('closeReport').onclick = () => {
    document.getElementById('reportModal').style.display = "none";
  };

  document.getElementById('reportBtn').onclick = () => {
    document.getElementById('reportModal').style.display = "block";
  };
});

</script>
</body>
</html>
